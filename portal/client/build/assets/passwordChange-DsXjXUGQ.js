import{r as t,j as r,y as v}from"./index-BSsz9qxB.js";import{C as y,a as b}from"./CCardBody-D3Dx3XpO.js";import{C as F}from"./CCardHeader-C2979ekI.js";import{C as h}from"./CAlert-C3a4Yw5P.js";import{C as E}from"./CForm-CiFAbnKG.js";import{C as p}from"./CFormLabel-AmSnGjPJ.js";import{C as P,b as C}from"./CFormInput-DYeOzx3L.js";import{a as S}from"./CButton-CAzkA97O.js";import"./CConditionalPortal-CrZp0K_G.js";const H=()=>{const[a,x]=t.useState({currentPassword:"",newPassword:""}),[n,d]=t.useState(""),[i,c]=t.useState(""),[e,l]=t.useState({}),m=s=>{x({...a,[s.target.name]:s.target.value}),l({...e,[s.target.name]:""})},j=()=>{const s={};return a.currentPassword||(s.currentPassword="Old Password is needed"),a.newPassword||(s.newPassword="New Password is needed."),l(s),Object.keys(s).length===0},f=async s=>{var w,u;if(s.preventDefault(),!!j())try{const o=localStorage.getItem("token"),{data:g}=await v.put("/users/change-password",a,{headers:{Authorization:`Bearer ${o}`}});d(g.message),c("")}catch(o){c(((u=(w=o.response)==null?void 0:w.data)==null?void 0:u.error)||"Error on changing password."),d("")}};return r.jsxs(y,{className:"mt-4",children:[r.jsx(F,{children:r.jsx("h5",{children:"Şifre Değiştir"})}),r.jsxs(b,{children:[n&&r.jsx(h,{color:"success",children:n}),i&&r.jsx(h,{color:"danger",children:i}),r.jsxs(E,{onSubmit:f,noValidate:!0,children:[r.jsxs("div",{className:"mb-3",children:[r.jsx(p,{htmlFor:"currentPassword",children:"Eski Şifre"}),r.jsx(P,{type:"password",id:"currentPassword",name:"currentPassword",value:a.currentPassword,onChange:m,invalid:!!e.currentPassword}),e.currentPassword&&r.jsx(C,{invalid:!0,children:e.currentPassword})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx(p,{htmlFor:"newPassword",children:"Yeni Şifre"}),r.jsx(P,{type:"password",id:"newPassword",name:"newPassword",value:a.newPassword,onChange:m,invalid:!!e.newPassword}),e.newPassword&&r.jsx(C,{invalid:!0,children:e.newPassword})]}),r.jsx(S,{color:"primary",type:"submit",children:"Şifreyi Güncelle"})]})]})]})};export{H as default};
